# MCP-NETA-CHO プロジェクト詳細設計書

## プロジェクト概要

### 背景
漫才やコントのネタ作りにはAIが活用できる可能性があるが、単に「漫才の台本を作って」と依頼しても良いものはできない。なぜなら、漫才・コントには明確な理論と構成の方程式が存在し、国語の勉強のようにきちんと構造を理解して組み立てる必要があるからである。

### 目的
漫才・コント作家が台本を構成する際の補助をするMCPサーバーを開発する。これは面白いネタを自動生成するものではなく、漫才・コントの理論に基づいて構成をチェック・提案し、作家の創作活動を支援するツールである。

### プロジェクト名
**mcp-neta-cho**（MCPネタ帳）
- 「ネタ帳」は芸人の必需品であり親しみやすい
- 「超（ちょう）」とも読めて「超ネタ帳」というニュアンスも含む

## 漫才・コントの基礎理論

### 1. 登場人物とシチュエーションの組み合わせ理論

漫才・コントには以下の4つの組み合わせが存在する：

1. **現実的な登場人物 × 現実的なシチュエーション**
   - 例：サラリーマンが会社で仕事をする
   
2. **現実的な登場人物 × 非現実的なシチュエーション**
   - 例：サラリーマンが魔法の世界に迷い込む
   
3. **非現実的な登場人物 × 現実的なシチュエーション**
   - 例：宇宙人がコンビニでバイトする
   
4. **非現実的な登場人物 × 非現実的なシチュエーション**
   - 例：宇宙人が魔法の世界で冒険する

#### 重要な制約
**どちらか必ず一方は現実的にしなければならない**

理由：両方が非現実的だと観客が共感できなくなり、「あるある」や「そういうことあるよな」という笑いの基盤が失われる。現実との接点があることで、観客は「もし自分だったら」と想像でき、そこから笑いが生まれる。両方非現実だとただのファンタジーになり、ツッコミどころがなくなってしまう。

### 2. ボケのレベル理論（三段階理論）

ボケには以下の3つのレベルが存在し、観客の反応も段階的に変化する：

#### レベル1：小ボケ（あるある）
- **内容**：日常的に普通にありそうな共感できるボケ
- **例**：遅刻しそうで走る
- **観客の反応**：クスッと笑う、ニヤッとする
- **役割**：観客を自分に引き込み、笑いの準備状態を作る

#### レベル2：中ボケ（ありそう）
- **内容**：日常の延長線上にあるが少し行き過ぎたボケ
- **例**：遅刻しそうだから新幹線に乗る
- **観客の反応**：声を出して笑う、心の中で「なんでやねん！」
- **役割**：小ボケで掴んだ観客を徐々に非日常へ連れていく橋渡し

#### レベル3：大ボケ（ないない/ありえへん）
- **内容**：完全に非現実的で突き抜けたボケ
- **例**：遅刻しそうだから瞬間移動の練習を始める
- **観客の反応**：爆笑、手を叩いて笑う、「そんなアホな！」
- **役割**：十分に温まった観客に最大の笑いを提供

#### 構成の重要性
いきなり大ボケをしても観客は「え？」となるだけ。小ボケから順番に積み上げて、観客を笑いの準備状態にしてから大ボケを持ってくる必要がある。階段を一段ずつ上がるように観客を誘導していく技術が漫才の「構成」である。

### 3. ボケの種類とバリエーション

同じレベルのボケでも、種類を変えることで飽きさせない工夫が必要：

#### ボケの種類の例
- **勘違い系**：聞き間違い、見間違い、思い込み
- **天然系**：素で間違える、常識がズレている
- **理屈系**：論理は通っているが結論がおかしい
- **価値観系**：一般的な価値観とズレた考え方
- **行動系**：普通じゃない行動をとる
- **言語系**：言葉の使い方がおかしい

#### ツッコミの種類の例
- **普通のツッコミ**：「なんでやねん！」
- **ノリツッコミ**：一度ボケに乗ってからツッコむ
- **ボケ殺し**：冷静にボケを否定する
- **例えツッコミ**：別の例えで返す
- **フリ返し**：ボケをさらに広げてから落とす

### 4. 構成の組み立て方

効果的な漫才・コントの構成には以下の要素が必要：

1. **縦軸（ボケのレベル）**：あるある→ありそう→ないない
2. **横軸（ボケの種類）**：勘違い、天然、理屈、価値観など

この2軸を意識して、同じパターンが続かないようにバリエーションを持たせる。

## 実例：ナビコントの構成

### シチュエーション
複数のナビアプリを同時に起動したドライバーが混乱する

### 構成の流れ

#### 序盤（あるある）
- 各ナビが同じルート案内：「300m先右折です」×3台
- 観客の反応：「まあ、そうなるわな」

#### 中盤（ありそう）
- Google「渋滞してるから左の道行きましょう」
- Yahoo!「いや、直進の方が早いですよ」
- 純正ナビ「...右折でお願いします」
- 観客の反応：「あー、ありそう！」

#### 終盤（ないない）
- Google「ちょっと、なんで右なん？」
- 純正ナビ「私の方が詳しいんです！」
- Yahoo!「二人とも落ち着いて！」
- ドライバー「お前ら黙れ！」
- 観客の反応：「そんなんないわ！」

この例では、ボケの種類も「情報の違い」→「性格の違い」→「感情的な対立」と変化させている。

## MCP-NETA-CHOの機能設計

### 基本コンセプト
- 面白さを自動生成するのではなく、構成の理論を可視化・分析する
- 作家の創造性を支援し、理論的な裏付けを提供する

### 主要機能

#### 1. データベース管理機能
- **ボケ・ツッコミパターンDB**
  - 種類（勘違い系、天然系、理屈系など）
  - レベル（あるある/ありそう/ないない）
  - 使用例
  - 効果的なシチュエーション
  
- **登場人物テンプレート**
  - 現実的/非現実的の分類
  - キャラクター特性
  - 相性の良い相方タイプ
  
- **シチュエーションDB**
  - 現実的/非現実的の分類
  - ジャンル（日常、職場、学校、SF、ファンタジーなど）
  - 使用頻度と効果

#### 2. 構成分析機能
- **バランスチェック**
  - 同じボケパターンの連続を検出・警告
  - あるある/ありそう/ないないの配分分析
  - ボケとツッコミの比率チェック
  
- **テンポ分析**
  - ボケとツッコミの間隔測定
  - 緩急のリズムパターン分析
  - 観客の温度グラフ（盛り上がり推移予測）

#### 3. 提案・支援機能
- **次のボケ提案**
  - 現在の流れから最適な次のボケを提案
  - 使用していないボケパターンの提示
  
- **構成テンプレート**
  - 成功パターンのテンプレート提供
  - ジャンル別の定番構成

#### 4. 学習・蓄積機能
- **過去作品の分析**
  - 成功した漫才・コントの構成パターン学習
  - 演者ごとの得意パターン分析
  
- **効果測定**
  - 実際の公演での反応を記録
  - パターンごとの成功率分析

### 技術仕様

#### データベース構造（SQLite）

```sql
-- ボケパターンテーブル
CREATE TABLE boke_patterns (
    id INTEGER PRIMARY KEY,
    content TEXT NOT NULL,
    type VARCHAR(50), -- 勘違い系、天然系、理屈系など
    level VARCHAR(20), -- あるある、ありそう、ないない
    situation_id INTEGER,
    character_id INTEGER,
    usage_count INTEGER DEFAULT 0,
    success_rate FLOAT
);

-- ツッコミパターンテーブル
CREATE TABLE tsukkomi_patterns (
    id INTEGER PRIMARY KEY,
    content TEXT NOT NULL,
    type VARCHAR(50), -- 普通、ノリツッコミ、ボケ殺しなど
    intensity INTEGER, -- ツッコミの強さ（1-10）
    usage_count INTEGER DEFAULT 0
);

-- シチュエーションテーブル
CREATE TABLE situations (
    id INTEGER PRIMARY KEY,
    name VARCHAR(100),
    description TEXT,
    is_realistic BOOLEAN,
    genre VARCHAR(50)
);

-- 登場人物テーブル
CREATE TABLE characters (
    id INTEGER PRIMARY KEY,
    name VARCHAR(100),
    description TEXT,
    is_realistic BOOLEAN,
    personality_type VARCHAR(50)
);

-- ネタ構成テーブル
CREATE TABLE neta_compositions (
    id INTEGER PRIMARY KEY,
    title VARCHAR(200),
    created_at TIMESTAMP,
    situation_id INTEGER,
    total_duration INTEGER -- 秒数
);

-- ネタ詳細テーブル
CREATE TABLE neta_details (
    id INTEGER PRIMARY KEY,
    composition_id INTEGER,
    sequence_number INTEGER,
    boke_id INTEGER,
    tsukkomi_id INTEGER,
    timing_seconds INTEGER
);
```

#### MCPツール設計

1. **register_boke** - ボケを登録
2. **register_tsukkomi** - ツッコミを登録
3. **analyze_balance** - 構成バランスを分析
4. **suggest_next_boke** - 次のボケを提案
5. **check_tempo** - テンポをチェック
6. **visualize_flow** - 盛り上がりの流れを可視化
7. **search_similar_patterns** - 類似パターンを検索
8. **export_script** - 台本として出力

### 開発ロードマップ

1. **フェーズ1：基本機能実装**
   - データベース設計・実装
   - 基本的なCRUD操作
   - シンプルな分析機能

2. **フェーズ2：分析機能強化**
   - バランスチェック機能
   - テンポ分析
   - 可視化機能

3. **フェーズ3：AI連携**
   - パターン学習機能
   - 自動提案機能の高度化
   - 成功率予測

### 使用イメージ

```bash
# ボケを登録
mcp-neta-cho register-boke "遅刻しそうやから走る" --type "行動系" --level "あるある"

# 構成をチェック
mcp-neta-cho analyze-balance --file "my_neta.txt"

# 次のボケを提案
mcp-neta-cho suggest-next --context "current_neta.json"
```

## 重要な補足事項

### なぜこのツールが必要か
1. プロの芸人が感覚的に行っている構成を理論化
2. アマチュアでも理論的にネタを組み立てられる
3. 同じネタでも演者の力量で面白さは変わるが、構成がしっかりしていれば成功率は上がる
4. 「笑い飯」の例：同じネタでも経験により演技力が向上し面白さが増す

### このツールがやらないこと
- 面白いネタの自動生成
- 演技指導
- 「ウケる」保証

### このツールがやること
- 理論に基づいた構成支援
- バランスの可視化
- パターンの提案
- 学習による改善

このプロジェクトは、お笑いの「型」を学び、実践するための強力な支援ツールとなることを目指している。